<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="mx-auto max-w-3xl p-4">
 <div>
    <div class="mb-4">
      <h1 class="text-3xl font-bold ml-66">WEBSOCKET DEMO</h1>
    </div><br>
    <div class="mb-4">
      <input type="text" id="message" placeholder="Enter your message" 
             class="border-2 border-black p-2">
      <button id="btn" class="border-2 border-black p-1 bg-gray-200 hover:bg-gray-300">Send</button>
    </div>
    <div id="connect" class="text-green-600"></div>
    <div id="status" class="border-2 border-black p-3 h-40"></div>
  </div>

    <script>
      const ws=new WebSocket('ws://localhost:3000')
      const message=document.getElementById('message')
      const btn=document.getElementById('btn')
      const status=document.getElementById('status')
      const connect=document.getElementById('connect')
      ws.onopen=()=>{
        connect.innerHTML+='Connected to Server! <br>'
      }
      ws.onmessage=(msg)=>{
        status.innerHTML+=msg.data+'<br>'
      }
      btn.addEventListener('click',()=>{
        const msg=message.value
        //while broadcasting, everyone can know who the client is, so we can send JSON
        ws.send("Server recieved: "+JSON.stringify({
          type:'chat',
          user:'Hiba',
          message:msg
        },null,2))
        status.innerHTML+='You sent: '+msg+'<br>'
        msg.input=''
      })
    </script>
</body>
</html>