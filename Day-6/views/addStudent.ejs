<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Add Student</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body
    class="bg-black text-purple-300 min-h-screen flex items-center gap-2 justify-center"
  >
    <form
      action="/admin/studentList2/addStudent"
      id="form"
      enctype="multipart/form-data"
      method="POST"
      class="bg-gray-900 p-6 rounded shadow-md w-96"
    >
      <h1 class="text-3xl mb-4 text-center font-bold">ADD STUDENT</h1>

      <div class="relative mb-4">
        <input
          type="text"
          id="username"
          name="username"
          placeholder="Name"
          class="w-full p-2 mb-3 rounded bg-gray-800"
        />
        <p
          id="usernameFeedback"
          class="hidden text-sm text-red-500 absolute bottom-0"
        ></p>
      </div>

      <div class="relative mb-4">
        <input
          type="number"
          id="age"
          name="age"
          placeholder="Age"
          class="w-full p-2 rounded mb-3 bg-gray-800"
        />
        <p
          id="ageFeedback"
          class="hidden text-sm text-red-500 absolute bottom-0 text-sm"
        ></p>
      </div>

      <div class="relative mb-3">
        <input
          type="email"
          id="email"
          name="email"
          placeholder="Email"
          class="w-full p-2 mb-3 rounded bg-gray-800"
        />
        <p
          id="emailFeedback"
          class="hidden text-sm text-red-500 absolute bottom-0"
        ></p>
      </div>

      <div class="relative mb-4">
        <input
          type="text"
          id="course"
          name="course"
          placeholder="Course"
          class="w-full p-2 mb-3 rounded bg-gray-800"
        />
        <p
          id="courseFeedback"
          class="hidden text-sm text-red-500 absolute bottom-0"
        ></p>
      </div>

      <div class="relative mb-4">
        <div
          class="flex rounded bg-gray-800 text-white p-2 text-gray-300 items-center gap-6"
        >
          <p class="mb-0 font-medium text-gray-400">Select Role:</p>

          <label class="flex items-center gap-2">
            <input
              type="radio"
              name="role"
              value="student"
              class="accent-purple-600"
            />
            <span class="text-gray-400">Student</span>
          </label>

          <label class="flex items-center gap-2">
            <input
              type="radio"
              name="role"
              value="admin"
              class="accent-purple-600"
            />
            <span class="text-gray-400">Admin</span>
          </label>
        </div>
        <p id="roleFeedback" class="hidden absolute text-red-500"></p><br>
       <div class="mb-4">
    <label class="block text-gray-400 mb-2">Upload Photo</label>
    <input type="file" name="photo" class="text-gray-200">
  </div>

  <button
    type="submit"
    class="bg-purple-700 text-white hover:bg-purple-500 px-4 py-2 rounded w-full"
  >
    Add Student
  </button>
     
    </form>
    <script>
      const username = document.getElementById("username");
      const usernameFeedback = document.getElementById("usernameFeedback");
      const age = document.getElementById("age");
      const ageFeedback = document.getElementById("ageFeedback");
      const email = document.getElementById("email");
      const emailFeedback = document.getElementById("emailFeedback");
      const role = document.getElementsByName("role");
      const roleFeedback = document.getElementById("roleFeedback");
      const course = document.getElementById("course");
      const courseFeedback = document.getElementById("courseFeedback");
      const feedback = document.getElementById("feedback");
      const form = document.getElementById("form");

      form.addEventListener("submit", (e) => {
        let roleSelected = false;

        // clear old feedback messages
        usernameFeedback.textContent = "";
        ageFeedback.textContent = "";
        emailFeedback.textContent = "";
        courseFeedback.textContent = "";
        roleFeedback.textContent = "";
        feedback.textContent = "";

        const usernamePattern = /^[A-Za-z ]+$/;
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const agePattern = /^(?:[1-9][0-9]?|100)$/;
        const coursePattern = /^[A-Za-z ]+$/;

        let isValid = true;
        role.forEach((radio) => {
          if (radio.checked) roleSelected = true;
        });
        if (
          !username.value &&
          !email.value &&
          !age.value &&
          !roleSelected &&
          !course.value
        ) {
           e.preventDefault();
          feedback.textContent = "Please fill out the form";
          isValid = false;
          return;
        }

        if (!usernamePattern.test(username.value)) {
          usernameFeedback.textContent =
            "Username can only have letters and spaces";
          usernameFeedback.classList.remove("hidden");
          isValid = false;
        }

        if (!emailPattern.test(email.value)) {
          emailFeedback.textContent = "Please Enter Valid Email";
          emailFeedback.classList.remove("hidden");
          isValid = false;
        }

        if (!agePattern.test(age.value)) {
          ageFeedback.textContent = "Please Enter Valid Age";
          ageFeedback.classList.remove("hidden");
          isValid = false;
        }

        if (!coursePattern.test(course.value)) {
          courseFeedback.textContent =
            "Course can only have letters and spaces";
          courseFeedback.classList.remove("hidden");
          isValid = false;
        }

        if (!roleSelected) {
          roleFeedback.textContent = "Please select your role";
          roleFeedback.classList.remove("hidden");
          isValid = false;
        }

        if (isValid) {
          form.submit();
        }
      });
    </script>
  </body>
</html>
